<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Caminos Mercedarios</title>
  <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>
</head>

<body>

  <!--FLIPBOOK-->

  <div class="flip-book" id="example">

  </div>
  <!--FLIPBOOK-->
  <script type="">
    let  magazines = 
    {
      "15":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 5
      },
      "16":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 8
      },
      "17":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 5
      },
      "18":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 4
      },
      "19":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 5
      },
      "20":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 6
      },
      "21":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 4
      },
      "22":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 5
      },
      "23":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 4
      },
      "24":
      {
        size: 
        {
          width: 3307, 
          height: 4678
        },
        numberOfPages: 6
      }
    }
    LoadMagazine();

    function LoadMagazine(){
      let today = new Date()
      let month = today.getMonth() + 1;
      let day = today.getDate();
      if(month != 9) return;
      if(!magazines[day]) return;
      let magazine = magazines[day];
      //var pageWidth = 595;
      //var pageHeight = 841;
      let pageWidth = magazine.size.width;
      let pageHeight = magazine.size.height;
      let ratio = pageWidth / pageHeight;
      let wHeight = window.innerHeight * 0.95;
      let wMaxWidth = wHeight * ratio;
      const pageFlip = new St.PageFlip(
      document.getElementById("example"),
      {
          // start page index
          startPage: 0,
          size: "stretch",
          // width & height *(REQUIRED)
          width: pageWidth,
          height: pageHeight,
          // min/max width & height
          minWidth: 0,
          maxWidth: wMaxWidth,
          minHeight: 0,
          maxHeight: wHeight,
          // draw book shadows
          drawShadow: true,
          // animation speed
          flippingTime: 1000,
          // allows to switch to portrait mode
          usePortrait: false,
          // z-index property
          startZIndex: 0,
          // auto resizes the parent container to fit the book
          autoSize: true,
          // max opacity of shadow
          maxShadowOpacity: 1,
          // shows book cover
          showCover: false,
          // supports mobile scroll?
          mobileScrollSupport: true
      }
    );
    let pages = [];
    for(let i = 0; i < magazine.numberOfPages; i++) pages.push(`/${day}/${i+1}.png`);
    pageFlip.loadFromImages(pages);
    }
  </script>
</body>

</html>